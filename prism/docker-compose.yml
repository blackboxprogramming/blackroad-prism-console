version: '3.9'
services:
  prism:
    build: .
    ports:
      - '3000:3000'
    env_file: ../.env
    depends_on:
      - db
      - s3
  db:
    image: postgres:16
    environment:
      POSTGRES_PASSWORD: prism # pragma: allowlist secret
      POSTGRES_USER: prism
      POSTGRES_DB: prism
    ports:
      - '5432:5432'
  s3:
    image: minio/minio
    environment:
      MINIO_ROOT_USER: minio
      MINIO_ROOT_PASSWORD: minio123 # pragma: allowlist secret
    command: server /data
    ports:
      - '9000:9000'

openapi: 3.1.0
info:
  title: Blackbox Tools Adapter
  version: 1.0.0
servers:
  - url: http://localhost:8787
security:
  - ToolsToken: []
components:
  securitySchemes:
    ToolsToken:
      type: apiKey
      in: header
      name: X-Tools-Token
paths:
  /tools/invoke:
    post:
      summary: Invoke a tool by name with strict contract
      security:
        - ToolsToken: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [tool, id, args]
              properties:
                tool: { type: string, enum: [ask_cloud, ping_pi, get_secret, use_secret, repo_dispatch, git_ops, file_read, file_write, http_request, memory_remember, memory_recall] }
                id: { type: string }
                args: { type: object, additionalProperties: true }
      responses:
        "200":
          description: Tool result
          content:
            application/json:
              schema:
                type: object
                properties:
                  id: { type: string }
                  ok: { type: boolean }
                  result: { type: object }
                  error: { type: string }
        "401": { description: Unauthorized }
        "400": { description: Bad Request }

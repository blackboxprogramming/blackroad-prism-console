name: support_escalation_rca
trigger:
  source: zendesk
  event: ticket.updated
  filter: severity in ["Sev-1","Sev-2"]
actions:
  - slack.war_room.create:
      {
        channel: '#support-war-room',
        title: '{{ticket.id}} â€“ {{ticket.subject}}',
      }
  - zoom.meeting.create: { channel: '#support-war-room' }
  - jira.incident.create:
      { project: 'INC', sev: '{{ticket.severity}}', link: '{{ticket.url}}' }
  - notion.timeline.start: { page: 'Incident Timeline', ref: '{{ticket.id}}' }
  - rca.generate:
      { template: 'standard', sources: ['slack', 'datadog', 'splunk'] }
  - evidence.export: { path: 'evidence/{{ticket.id}}', sign: true }
observability:
  metrics: [flow.total, flow.success, flow.latency_ms, mttr]
  logs: { splunk: { index: 'audit_incident', hec: '{SPLUNK_HEC_STG}' } }
slo: { mttr_hours_lte: 2, rca_due_business_days: 5 }

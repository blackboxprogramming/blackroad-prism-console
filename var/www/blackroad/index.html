<!-- FILE: /var/www/blackroad/index.html -->
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>BlackRoad</title>
</head>
<body>
  <h1>BlackRoad</h1>
  <div id="plans"></div>
  <div id="chat-panel-root"></div>
  <div id="lucidia-brain-badge" style="position:fixed;bottom:5px;right:5px;padding:4px 8px;background:#FF4FD8;color:#fff;font-size:12px">Lucidia Brain: Offline</div>
  <script>
  async function updateBadge(){
    try{
      const r=await fetch('/api/lucidia/brain/health');
      const j=await r.json();
      const el=document.getElementById('lucidia-brain-badge');
      let color='#FF4FD8';
      if(j.status==='online') color='#0096FF';
      else if(j.status==='degraded') color='#FDBA2D';
      el.style.background=color;
      el.textContent='Lucidia Brain: '+j.status.charAt(0).toUpperCase()+j.status.slice(1);
    }catch(e){console.error(e);}
  }
  updateBadge();
  setInterval(updateBadge,15000);
  fetch('/api/subscribe/plans').then(r=>r.json()).then(j=>{
    const el=document.getElementById('plans');
    if(j.plans){
      el.innerHTML=j.plans.map(p=>`<div><strong>${p.name}</strong>: $${(p.price_cents/100).toFixed(2)}/${p.interval}</div>`).join('');
    }
  }).catch(()=>{});
  </script>
  <script src="/chat-panel.js" defer></script>
</body>
</html>

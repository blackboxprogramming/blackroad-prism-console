<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Truth</title>
</head>
<body>
<div class="card">
  <h3>Feed</h3>
  <ul id="feed"></ul>
</div>
<div class="card">
  <h3>Compare (CTD)</h3>
  <input id="cidA" placeholder="cid A"><br><br>
  <input id="cidB" placeholder="cid B"><br><br>
  <button onclick="cmp()">Compare</button>
  <pre id="cmpout" style="white-space:pre-wrap;margin-top:8px"></pre>
</div>
<script>
async function cmp(){
  const a = document.getElementById('cidA').value.trim();
  const b = document.getElementById('cidB').value.trim();
  if(!a||!b) return;
  const r = await fetch('/api/truth/diff?cid='+encodeURIComponent(a)+'&cid2='+encodeURIComponent(b));
  const j = await r.json();
  document.getElementById('cmpout').textContent =
    'CTD='+(j.ctd?.toFixed? j.ctd.toFixed(3): j.ctd)+'  proof_mismatch='+(j.proof_mismatch?'yes':'no')+
    (j.aPublisher||j.bPublisher? `\nA:${j.aPublisher||'-'}  B:${j.bPublisher||'-'}`:'')+
    '\nops (first 20):\n'+ (j.edit_ops||[]).slice(0,20).map(o=>`${o.op} ${o.path}`).join('\n');
}
</script>
</body>
</html>

# 5. Deployment & Ops

We enforce an "always-green" edge: NGINX serves a branded fallback SPA, `/health` returns 200, `/api/health` returns `{ok:true}`, and `/api/ops` exposes version + error_rate_5m. This prevents 404/blank-screen failures and decouples API instability from domain availability [oai_citation:15‡THE BRAND AND NGINX SETUP THAT WORK.txt](file-service://file-Rd9Jh7adPjc2hCUCdE43uE).

**Key config**  
- Reverse proxy: `/api/*` → `127.0.0.1:4000`; WebSockets upgrade for `/socket.io/`.  
- API unit: `Restart=always`, 2s back-off.  
- Status probes: `curl /health`, `curl /api/health`, `curl /api/ops`.

**Runtime metrics**  
Parsed localhost events and login summaries show route activity and SSO reliability; we surface error rate over 5m for quick triage.

*Figure refs*: see `/figures/` generated by `make figures`.

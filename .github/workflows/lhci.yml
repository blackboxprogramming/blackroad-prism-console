name: Lighthouse CI
on:
  schedule: [{ cron: '13 5 * * *' }]
  workflow_dispatch:
jobs:
  lhci:
    runs-on: ubuntu-latest
    steps:
      - name: Run Lighthouse against prod
        uses: treosh/lighthouse-ci-action@v12
        with:
          urls: |
            https://${{ secrets.SITE_DOMAIN }}/apps/quantum/ternary_consciousness_v3.html
          configPath: ./lighthouserc.json
          uploadArtifacts: true
          runs: 2
      - name: Gate minimum scores
        run: |
          echo "Contentful Paint and Best Practices must be > 0.8 (check artifacts)"

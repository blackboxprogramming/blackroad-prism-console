name: Size Labels
on: { pull_request: { types: [opened, synchronize, reopened] } }
permissions: { pull-requests: write }
jobs:
  size:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const {owner,repo} = context.repo; const num=context.payload.pull_request.number;
            const pr = (await github.pulls.get({owner,repo,pull_number:num})).data;
            const changes = pr.additions + pr.deletions;
            const bucket = changes<50?'size/XS':changes<150?'size/S':changes<300?'size/M':changes<600?'size/L':'size/XL';
            const all = ['size/XS','size/S','size/M','size/L','size/XL'];
            await github.issues.addLabels({owner,repo,issue_number:num,labels:[bucket]});
            for (const l of all.filter(x=>x!==bucket)) { try { await github.issues.removeLabel({owner,repo,issue_number:num,name:l}); } catch(e){} }

name: Semantic PR Title (soft)
on: [pull_request_target]
permissions:
  pull-requests: write
jobs:
  check:
    runs-on: ubuntu-latest
    steps:
      - uses: amannn/action-semantic-pull-request@v5
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          types: |
            feat, fix, chore, docs, refactor, test, ci
          requireScope: false
          wip: true
      - uses: actions/github-script@v7
        if: failure()
        with:
          script: |
            const {owner,repo} = context.repo; const num=context.payload.pull_request.number;
            const t = "chore: " + context.payload.pull_request.title;
            await github.pulls.update({owner,repo,pull_number:num,title:t});

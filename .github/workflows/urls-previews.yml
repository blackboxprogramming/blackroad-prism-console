name: ChatOps: URLs & Previews
on: { issue_comment: { types: [created] } }
permissions: { pull-requests: write }
jobs:
  urls:
    if: startsWith(github.event.comment.body, '/urls')
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const d = process.env.BLACKROAD_DOMAIN || '';
            const base = process.env.BLACKROAD_URL || (d?`https://${d}`:'(not set)');
            const ghPages = `https://${context.repo.owner}.github.io`;
            const msg = [
              `**BlackRoad URLs**`,
              `• Primary: ${base}`,
              `• GitHub Pages: ${ghPages}`,
              `• Status JSON: ${base !== '(not set)' ? base + '/status.json' : '(set BLACKROAD_URL)' }`
            ].join('\n');
            await github.issues.createComment({owner: context.repo.owner, repo: context.repo.repo, issue_number: context.payload.issue.number, body: msg});

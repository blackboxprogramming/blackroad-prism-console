<!doctype html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Status | BlackRoad.io</title>
    <meta name="description" content="Live status of BlackRoad.io services." />
    <style>
      :root { color-scheme: dark; }
      body { margin: 0; font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; background:#0b0b10; color:#e8e8f0; }
      .wrap { max-width: 880px; margin: 40px auto; padding: 24px; border-radius: 16px; background:#14141d; box-shadow: 0 10px 30px rgba(0,0,0,.35); }
      h1 { margin: 0 0 8px; font-size: 22px; }
      .pill { display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; font-weight:600; }
      .ok { background:#10b98120; color:#34d399; border:1px solid #065f46; }
      .bad { background:#ef444420; color:#fb7185; border:1px solid #7f1d1d; }
      .muted { color:#a3a3ad; }
      pre { background:#0f0f15; border:1px solid #23232c; padding:12px; border-radius:10px; overflow:auto; }
      a { color:#34d399; text-decoration:none; }
      a:hover { text-decoration:underline; }
      .nav { display:flex; justify-content:space-between; align-items:center; margin-bottom:18px; }
      .links a { margin-left:12px; }
    </style>
  </head>
  <body>
    <div class="wrap" role="main">
      <div class="nav">
        <strong><a href="/">BlackRoad.io</a></strong>
        <div class="links">
          <a href="/portal">Portals</a>
          <a href="/docs">Docs</a>
        </div>
      </div>


  <h1>Status</h1>
  <p class="muted">Live probe of <code>/api/health.json</code> via NGINX proxy.</p>

  <p id="pill" class="pill muted">Checking…</p>
  <div id="detail" class="muted" style="margin:8px 0 16px 0;">Fetching status…</div>

  <h2 style="font-size:16px;margin:18px 0 8px;">Raw</h2>
  <pre id="raw">Waiting for response…</pre>

  <p class="muted" style="margin-top:18px">
    Need help? See <a href="/docs">Docs</a>.
  </p>
</div>

<script>
  (async function () {
    const pill   = document.getElementById('pill');
    const rawEl  = document.getElementById('raw');
    const detail = document.getElementById('detail');

    try {
      const res = await fetch('/api/health.json', { cache: 'no-store' });
      const txt = await res.text();
      rawEl.textContent = txt;

      let ok = false, info = '';
      try { const j = JSON.parse(txt); ok = res.ok; info = j.message || j.status || res.status; }
      catch { ok = res.ok; info = res.status + ' ' + res.statusText; }

      pill.className = 'pill ' + (ok ? 'ok' : 'bad');
      pill.textContent = ok ? '✅ API healthy' : '❌ API unreachable';
      detail.textContent = 'Probe: ' + info;
    } catch (e) {
      pill.className = 'pill bad';
      pill.textContent = '❌ API error';
      detail.textContent = String(e);
      rawEl.textContent = '—';
    }
  })();
</script>

  </body>
</html>


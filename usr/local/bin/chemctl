#!/usr/bin/env bash
set -euo pipefail
cmd="${1:-help}"

health() {
  curl -sS http://127.0.0.1:7014/openapi.json >/dev/null && echo "OK" || { echo "DOWN"; exit 1; }
}

case "$cmd" in
  start) sudo systemctl start chem.service ;;
  stop) sudo systemctl stop chem.service ;;
  restart) sudo systemctl restart chem.service ;;
  status) systemctl --no-pager status chem.service ;;
  enable) sudo systemctl enable chem.service ;;
  disable) sudo systemctl disable chem.service ;;
  logs) journalctl -u chem.service -f ;;
  health) health ;;
  *) echo "Usage: chemctl {start|stop|restart|status|enable|disable|logs|health}"; exit 1 ;;
 esac

{{- if .Values.secrets.breakGlass.value }}
{{- if and .Values.breakGlassSecret.enabled .Values.breakGlassSecret.create .Values.breakGlassSecret.value }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "autopal.breakGlassSecretName" . }}
  labels:
    {{- include "autopal.labels" . | nindent 4 }}
type: Opaque
stringData:
  {{ .Values.secrets.breakGlass.key | default "AUTOPAL_BREAK_GLASS_SECRET" }}: {{ .Values.secrets.breakGlass.value | quote }}
data:
  {{ default "secret" .Values.breakGlassSecret.key }}: {{ .Values.breakGlassSecret.value | b64enc }}
{{- end }}

{"openapi":"3.0.3","info":{"title":"RoadView Search Service","version":"0.1.0"},"paths":{"/api/search":{"get":{"tags":["search"],"summary":"Search Endpoint","operationId":"search_endpoint_api_search_get","parameters":[{"name":"q","in":"query","required":true,"schema":{"type":"string","minLength":1,"title":"Q"}},{"name":"sourceType","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(journal|news|blog|paper|gov|repo)$"},{"type":"null"}],"title":"Sourcetype"}},{"name":"bias","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(left|center|right|na)$"},{"type":"null"}],"title":"Bias"}},{"name":"minCred","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","maximum":100,"minimum":0},{"type":"null"}],"title":"Mincred"}},{"name":"from","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"From"}},{"name":"to","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"To"}},{"name":"sort","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"^(recency|credibility|domain|relevance)$"},{"type":"null"}],"title":"Sort"}},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"default":1,"title":"Page"}},{"name":"pageSize","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"title":"Pagesize"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/index/bulk":{"post":{"tags":["ingest"],"summary":"Index Bulk","operationId":"index_bulk_api_index_bulk_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkIndexRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BulkIndexResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/index/curated-seed":{"post":{"tags":["ingest"],"summary":"Index Curated Seed","operationId":"index_curated_seed_api_index_curated_seed_post","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CuratedSeedResponse"}}}}}}},"/api/domains":{"get":{"tags":["domains"],"summary":"Get Domains","operationId":"get_domains_api_domains_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DomainListResponse"}}}}}},"post":{"tags":["domains"],"summary":"Post Domain","operationId":"post_domain_api_domains_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DomainUpsert"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/DomainResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"tags":["meta"],"summary":"Health","operationId":"health_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"additionalProperties":true,"type":"object","title":"Response Health Health Get"}}}}}}},"/metrics":{"get":{"tags":["meta"],"summary":"Metrics","operationId":"metrics_metrics_get","responses":{"200":{"description":"Successful Response","content":{"text/plain":{"schema":{"type":"string"}}}}}}},"/openapi.json":{"get":{"tags":["meta"],"summary":"Openapi","operationId":"openapi_openapi_json_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"BiasEnum":{"type":"string","enum":["left","center","right","na"],"title":"BiasEnum"},"BulkDocumentInput":{"properties":{"title":{"type":"string","title":"Title"},"url":{"type":"string","title":"Url"},"domain":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Domain"},"sourceType":{"$ref":"#/components/schemas/SourceEnum"},"bias":{"$ref":"#/components/schemas/BiasEnum","default":"na"},"publishedAt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Publishedat"},"content":{"type":"string","title":"Content"},"author":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Author"},"hasCanonical":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Hascanonical"}},"type":"object","required":["title","url","sourceType","content"],"title":"BulkDocumentInput"},"BulkIndexRequest":{"properties":{"docs":{"items":{"$ref":"#/components/schemas/BulkDocumentInput"},"type":"array","title":"Docs"}},"type":"object","required":["docs"],"title":"BulkIndexRequest"},"BulkIndexResponse":{"properties":{"indexed":{"type":"integer","title":"Indexed"}},"type":"object","required":["indexed"],"title":"BulkIndexResponse"},"CuratedSeedResponse":{"properties":{"indexed":{"type":"integer","title":"Indexed"}},"type":"object","required":["indexed"],"title":"CuratedSeedResponse"},"Domain":{"properties":{"name":{"type":"string","title":"Name"},"displayName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Displayname"},"bias":{"$ref":"#/components/schemas/BiasEnum","default":"na"},"baseCred":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Basecred","default":60},"policy":{"$ref":"#/components/schemas/PolicyEnum","default":"allow"},"updatedAt":{"type":"string","title":"Updatedat"}},"type":"object","required":["name"],"title":"Domain"},"DomainListResponse":{"properties":{"items":{"items":{"$ref":"#/components/schemas/Domain"},"type":"array","title":"Items"}},"type":"object","required":["items"],"title":"DomainListResponse"},"DomainResponse":{"properties":{"domain":{"$ref":"#/components/schemas/Domain"}},"type":"object","required":["domain"],"title":"DomainResponse"},"DomainUpsert":{"properties":{"name":{"type":"string","minLength":1,"title":"Name"},"displayName":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Displayname"},"bias":{"$ref":"#/components/schemas/BiasEnum","default":"na"},"baseCred":{"type":"integer","maximum":100.0,"minimum":0.0,"title":"Basecred","default":60},"policy":{"$ref":"#/components/schemas/PolicyEnum","default":"allow"}},"type":"object","required":["name"],"title":"DomainUpsert"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"PolicyEnum":{"type":"string","enum":["allow","noindex","block"],"title":"PolicyEnum"},"ScoreBreakdown":{"properties":{"text":{"type":"number","title":"Text"},"domain":{"type":"number","title":"Domain"},"recency":{"type":"number","title":"Recency"},"structure":{"type":"number","title":"Structure"},"penalty":{"type":"number","title":"Penalty"}},"type":"object","required":["text","domain","recency","structure","penalty"],"title":"ScoreBreakdown"},"SearchResponse":{"properties":{"results":{"items":{"$ref":"#/components/schemas/SearchResult"},"type":"array","title":"Results"},"facets":{"additionalProperties":true,"type":"object","title":"Facets"},"meta":{"additionalProperties":true,"type":"object","title":"Meta"}},"type":"object","required":["results","facets","meta"],"title":"SearchResponse"},"SearchResult":{"properties":{"id":{"type":"string","title":"Id"},"title":{"type":"string","title":"Title"},"snippet":{"type":"string","title":"Snippet"},"url":{"type":"string","title":"Url"},"domain":{"type":"string","title":"Domain"},"sourceType":{"$ref":"#/components/schemas/SourceEnum"},"bias":{"$ref":"#/components/schemas/BiasEnum"},"credScore":{"type":"integer","title":"Credscore"},"publishedAt":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Publishedat"},"confidence":{"type":"number","title":"Confidence"},"score":{"type":"number","title":"Score"},"scoreBreakdown":{"$ref":"#/components/schemas/ScoreBreakdown"}},"type":"object","required":["id","title","snippet","url","domain","sourceType","bias","credScore","publishedAt","confidence","score","scoreBreakdown"],"title":"SearchResult"},"SourceEnum":{"type":"string","enum":["journal","news","blog","paper","gov","repo"],"title":"SourceEnum"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}